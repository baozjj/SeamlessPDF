# SeamlessPDF âœ¨

**é«˜æ€§èƒ½å‰ç«¯PDFå¯¼å‡ºè§£å†³æ–¹æ¡ˆ - å‘Šåˆ«ä¸»çº¿ç¨‹é˜»å¡ï¼Œå®ç°åƒç´ å®Œç¾çš„PDFæ–‡æ¡£**

SeamlessPDF æ˜¯ä¸€ä¸ªä¸“é—¨è§£å†³ä¼ ç»Ÿ html2canvas + jsPDF æ–¹æ¡ˆæ€§èƒ½ç“¶é¢ˆçš„å‰ç«¯PDFå¯¼å‡ºåº“ã€‚é€šè¿‡åˆ›æ–°çš„iframeéš”ç¦»æ¸²æŸ“æ¶æ„å’Œæ™ºèƒ½åˆ†é¡µç®—æ³•ï¼Œå®ç°äº†ä¸»çº¿ç¨‹éé˜»å¡çš„é«˜æ€§èƒ½PDFå¯¼å‡ºã€‚

## ğŸš€ æ ¸å¿ƒç‰¹æ€§

### æ€§èƒ½ä¼˜åŒ–

- **ğŸ”¥ ä¸»çº¿ç¨‹éé˜»å¡**ï¼šiframeéš”ç¦»æ¸²æŸ“ï¼Œé¿å…html2canvasé˜»å¡UI
- **âš¡ å¼‚æ­¥å¹¶è¡Œå¤„ç†**ï¼šå¤šå…ƒç´ å¹¶è¡Œæ¸²æŸ“ï¼Œæ˜¾è‘—æå‡å¯¼å‡ºé€Ÿåº¦

### æ™ºèƒ½åˆ†é¡µ

- **ğŸ§  åƒç´ çº§åˆ†æ**ï¼šåŸºäºCanvasåƒç´ åˆ†æçš„æ™ºèƒ½åˆ†é¡µç®—æ³•
- **ğŸ“‹ è¡¨æ ¼å®Œæ•´æ€§**ï¼šç²¾ç¡®è¯†åˆ«è¡¨æ ¼è¾¹æ¡†ï¼Œç¡®ä¿è¡¨æ ¼ä¸è¢«åˆ†å‰²
- **ğŸ¯ æœ€ä¼˜åˆ†é¡µç‚¹**ï¼šè‡ªåŠ¨å¯»æ‰¾æ®µè½é—´ç©ºç™½å’Œè¡¨æ ¼è¾¹æ¡†ä½œä¸ºåˆ†é¡µç‚¹

---

## ğŸ˜« ä¼ ç»Ÿæ–¹æ¡ˆçš„ç—›ç‚¹

ä¼ ç»Ÿçš„ `html2canvas` + `jsPDF` æ–¹æ¡ˆå­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š

### æ€§èƒ½é—®é¢˜

- **ä¸»çº¿ç¨‹é˜»å¡**ï¼šhtml2canvasåœ¨ä¸»çº¿ç¨‹æ‰§è¡Œï¼Œå¯¼è‡´é¡µé¢å¡é¡¿
- **åŒæ­¥æ‰§è¡Œ**ï¼šæ— æ³•å¼‚æ­¥å¤„ç†ï¼Œç”¨æˆ·ä½“éªŒå·®

### åˆ†é¡µé—®é¢˜

- **ç²—æš´åˆ†é¡µ**ï¼šåœ¨å›ºå®šé«˜åº¦å¤„å¼ºè¡Œåˆ‡å‰²å†…å®¹
- **å†…å®¹æ–­è£‚**ï¼šæ–‡å­—ã€å›¾ç‰‡ã€è¡¨æ ¼è¢«ä»ä¸­é—´åˆ†å‰²
- **ä¸“ä¸šæ€§å·®**ï¼šå½±å“æ–‡æ¡£çš„å¯è¯»æ€§å’Œä¸“ä¸šå½¢è±¡

## ğŸ’¡ SeamlessPDFçš„è§£å†³æ–¹æ¡ˆ

### 1. iframeéš”ç¦»æ¸²æŸ“æ¶æ„

```
ä¸»çº¿ç¨‹ â”€â”€â”
         â”œâ”€ ç”¨æˆ·äº¤äº’ä¿æŒå“åº”
         â””â”€ é€šè¿‡postMessageä¸iframeé€šä¿¡

iframe â”€â”€â”€â”
          â”œâ”€ html2canvasæ¸²æŸ“æ‰§è¡Œ
          â”œâ”€ é¿å…é˜»å¡ä¸»çº¿ç¨‹
          â””â”€ æ”¯æŒå¹¶è¡Œå¤„ç†å¤šä¸ªå…ƒç´ 
```

### 2. æ¸²æŸ“ååˆ†æç­–ç•¥

ä¸å†åœ¨æ¸²æŸ“å‰ä¿®æ”¹DOMç»“æ„ï¼Œè€Œæ˜¯ï¼š

1. **å®Œæ•´æ¸²æŸ“**ï¼šå°†HTMLå†…å®¹æ¸²æŸ“æˆå®Œæ•´çš„Canvas
2. **åƒç´ åˆ†æ**ï¼šé€šè¿‡åƒç´ çº§åˆ†æå¯»æ‰¾æœ€ä½³åˆ†é¡µç‚¹
3. **æ™ºèƒ½åˆ†å‰²**ï¼šåœ¨è‡ªç„¶ä½ç½®ï¼ˆç©ºç™½è¡Œã€è¡¨æ ¼è¾¹æ¡†ï¼‰è¿›è¡Œåˆ†é¡µ

### 3. å››é˜¶æ®µä¼˜åŒ–æµç¨‹

1. **Canvasæ¸²æŸ“é˜¶æ®µ**ï¼šå¹¶è¡Œæ¸²æŸ“é¡µçœ‰ã€å†…å®¹ã€é¡µè„š
2. **å¸ƒå±€è®¡ç®—é˜¶æ®µ**ï¼šè®¡ç®—é¡µé¢å°ºå¯¸å’Œç¼©æ”¾å‚æ•°
3. **æ™ºèƒ½åˆ†é¡µé˜¶æ®µ**ï¼šåˆ†ææœ€ä¼˜åˆ†é¡µç‚¹
4. **PDFç”Ÿæˆé˜¶æ®µ**ï¼šå¹¶è¡Œé¢„æ¸²æŸ“é¡µè„šï¼Œç”Ÿæˆæœ€ç»ˆPDF

---

## ğŸ“¦ å®‰è£…

```bash
# ä½¿ç”¨ pnpmï¼ˆæ¨èï¼‰
pnpm install

# æˆ–ä½¿ç”¨ npm
npm install

# æˆ–ä½¿ç”¨ yarn
yarn install
```

## ğŸ› ï¸ å¼€å‘

```bash
# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
pnpm dev

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
pnpm build

# é¢„è§ˆæ„å»ºç»“æœ
pnpm preview

# ä»£ç æ£€æŸ¥
pnpm lint

# ä»£ç æ ¼å¼åŒ–
pnpm format
```

## ğŸ¯ å¿«é€Ÿå¼€å§‹

### åŸºç¡€ç”¨æ³•

```typescript
import { generateIntelligentPdf } from "@/pdf-generator/generateQuotePDF";

// å‡†å¤‡é¡µé¢å…ƒç´ 
const headerElement = document.getElementById("header") as HTMLElement;
const contentElement = document.getElementById("content") as HTMLElement;
const footerElement = document.getElementById("footer") as HTMLElement;

// ç”ŸæˆPDF
const pdf = await generateIntelligentPdf({
  headerElement,
  contentElement,
  footerElement,
  onFooterUpdate: (currentPage: number, totalPages: number) => {
    footerState.currentPage = currentPage;
    footerState.totalPages = totalPages;
  },
});

// ä¸‹è½½PDF
pdf.save("report.pdf");
```

### Vueç»„ä»¶é›†æˆ

```vue
<template>
  <div>
    <button @click="exportPDF" :disabled="isExporting">
      {{ isExporting ? "å¯¼å‡ºä¸­..." : "å¯¼å‡ºPDF" }}
    </button>

    <div ref="headerRef"><!-- é¡µçœ‰å†…å®¹ --></div>
    <div ref="contentRef"><!-- ä¸»è¦å†…å®¹ --></div>
    <div ref="footerRef"><!-- é¡µè„šå†…å®¹ --></div>
  </div>
</template>

<script setup lang="ts">
import { ref } from "vue";
import { generateIntelligentPdf } from "@/pdf-generator/generateQuotePDF";

const isExporting = ref(false);
const headerRef = ref<HTMLElement>();
const contentRef = ref<HTMLElement>();
const footerRef = ref<HTMLElement>();

const exportPDF = async () => {
  isExporting.value = true;

  try {
    const pdf = await generateIntelligentPdf({
      headerElement: headerRef.value!,
      contentElement: contentRef.value!,
      footerElement: footerRef.value!,
      onFooterUpdate: (currentPage, totalPages) => {
        // æ›´æ–°é¡µè„šé€»è¾‘
      },
    });

    pdf.save("document.pdf");
  } finally {
    isExporting.value = false;
  }
};
</script>
```

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ä¸»çº¿ç¨‹                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ç”¨æˆ·äº¤äº’ â”‚ Vueç»„ä»¶ â”‚ PDFå¯¼å‡ºæ§åˆ¶ â”‚ æ€§èƒ½ç›‘æ§ â”‚ æ–‡ä»¶ä¸‹è½½      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                    postMessage é€šä¿¡
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      iframe æ¸²æŸ“è¿›ç¨‹                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  html2canvas â”‚ æ ·å¼æ³¨å…¥ â”‚ å…ƒç´ é‡å»º â”‚ Canvasç”Ÿæˆ â”‚ æ•°æ®è¿”å›    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                         Canvasæ•°æ®
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      æ™ºèƒ½åˆ†é¡µå¼•æ“                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  åƒç´ åˆ†æ â”‚ è¡¨æ ¼æ£€æµ‹ â”‚ ç©ºç™½è¯†åˆ« â”‚ åˆ†é¡µè®¡ç®— â”‚ ä¼˜åŒ–è°ƒæ•´       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                         åˆ†é¡µæ•°æ®
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      PDFç”Ÿæˆå¼•æ“                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  jsPDFé›†æˆ â”‚ é¡µé¢ç»„è£… â”‚ å›¾åƒå¤„ç† â”‚ æ–‡æ¡£è¾“å‡º â”‚ è´¨é‡ä¼˜åŒ–       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```
